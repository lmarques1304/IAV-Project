<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Recycle Islands VR - Plastic Island</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="../js/blink-controls.js"></script>
    <script src="../js/island-controls.js"></script>
    <script src="../js/island.js"></script>
  </head>

  <body>
    <a-scene>

      <a-assets>
        <a-asset-item id="treeModel" src="/assets/textures/Trees/Tree.glb"></a-asset-item>
      </a-assets>

      <a-sky></a-sky>

      <a-entity id="defaultLight"></a-entity>
      <a-entity id="sunLight" position="1 1 0"></a-entity>

      <a-entity id="rig" movement-controls="fly: false; speed: 100" wasd-controls="acceleration: 20">
        <a-entity id="camera" camera look-controls position="0 1.6 0"></a-entity>

        <a-entity id="leftHand"  oculus-touch-controls="hand: left"></a-entity>
        <a-entity id="rightHand" oculus-touch-controls="hand: right"></a-entity>

        <a-entity id="leftLaser" 
                  laser-controls="hand: left"
                  teleport-controls="cameraRig: #rig; teleportOrigin: #camera">
        </a-entity>

        <a-entity id="rightLaser" 
                  laser-controls="hand: right"
                  teleport-controls="cameraRig: #rig; teleportOrigin: #camera">
        </a-entity>
      </a-entity>

      <a-plane 
        class="ground"
        position="0 0 0"
        width="180"
        height="30"
        rotation="-90 0 0"
        src="/assets/textures/Ground/Ground093C_1K-JPG/Ground093C_1K-JPG_Color.jpg"
        repeat="60 10">
      </a-plane>

      <a-plane 
        position="0 0 515"
        width="180"
        height="1000"
        rotation="-90 0 0"
        src="/assets/textures/Ground/Ice003_1K-JPG/Ice003_1K-JPG_Color.jpg"
        repeat="100 1000">
      </a-plane>

      <a-plane 
        position="0 0 -65"
        width="180"
        height="100"
        rotation="-90 0 0"
        src="/assets/textures/Ground/Grass005_1K-JPG/Grass005_1K-JPG_Color.jpg"
        repeat="90 50">
      </a-plane>


      <a-entity id="welcomeText" position="0 3.5 -3">
        <a-text value="'Build your boat'" color="#000000" align="center" width="4"
                font="https://cdn.aframe.io/fonts/mozillavr.fnt">
        </a-text>
      </a-entity>

      <script>
        const planeWidth = 180;
        const planeHeight = 100;
        const planeOffsetZ = -65;

        for (let i = 0; i < 50; i++) {
          const tree = document.createElement('a-entity');
          tree.setAttribute('gltf-model', '#treeModel');
          tree.setAttribute('scale', '2 2 2');
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z = Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute('position', `${x} 2 ${z}`);
          tree.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
          document.querySelector('a-scene').appendChild(tree);
        }

        for (let i = 0; i < 50; i++) {
          const tree = document.createElement('a-entity');
          tree.setAttribute('gltf-model', '#treeModel');
          tree.setAttribute('scale', '2.5 2.5 2.5');
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z = Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute('position', `${x} 2.5 ${z}`);
          tree.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
          document.querySelector('a-scene').appendChild(tree);
        }

        for (let i = 0; i < 50; i++) {
          const tree = document.createElement('a-entity');
          tree.setAttribute('gltf-model', '#treeModel');
          tree.setAttribute('scale', '3.5 3.5 3.5');
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z = Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute('position', `${x} 3.5 ${z}`);
          tree.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
          document.querySelector('a-scene').appendChild(tree);
        }

        for (let i = 0; i < 50; i++) {
          const tree = document.createElement('a-entity');
          tree.setAttribute('gltf-model', '#treeModel');
          tree.setAttribute('scale', '4 4 4');
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z = Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute('position', `${x} 4 ${z}`);
          tree.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
          document.querySelector('a-scene').appendChild(tree);
        }
      </script>

      <script>
        setTimeout(() => {
          const text = document.querySelector('#welcomeText');
          if (text) text.setAttribute('visible', false);
        }, 10000);
      </script>
      
    </a-scene>
  </body>
</html>
